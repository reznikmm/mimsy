define(['standard', 'league-strings'], function(_ec) {return (function (_ec){_ec._nested = function (){};_ec._nested.prototype = _ec;_ec.response_listener=(function (){var _result =  function (){_ec.webapi.dom.event_listeners.event_listener.call (this);this.request = null;};var _props = {_pos_request: {value: 'request'},};_result.prototype = _ec._tag('response_listener', 'event_listener');Object.defineProperties(_result.prototype, _props);return _result;})();;_ec.user_info=(function (){var _result =  function (){this.user = "";this.name = "";this.avatar = "";};_result.prototype._assign = function(src){this.user = src.user;this.name = src.name;this.avatar = src.avatar;};_result._cast = function _cast (value){var result = new _result();result._assign (value);return result;};var props = {};props._pos_user={value: 'user'};props._pos_name={value: 'name'};props._pos_avatar={value: 'avatar'};Object.defineProperties(_result.prototype, props);return _result;})();;_ec.handle_event=_ec.response_listener.prototype.handle_event = function handle_event (event){var known_user = (window.document.getElementById("known_user"));var info =  new _ec.standard.logins.user_info();if (this.request.readyState===4) {if (this.request.status===200) {info._assign(JSON.parse(this.request.responseText));known_user.checked = !info.user.length == 0;};};};_ec.start=function start (){var request =  new XMLHttpRequest();var listener =  new _ec.standard.logins.response_listener();listener.request = request;_ec._addEventListener(request, "readystatechange", listener, false);request.open("GET", "/user", true);request.responseType = "text";request.send();};return _ec;})(_ec.logins=new _ec._nested());});
